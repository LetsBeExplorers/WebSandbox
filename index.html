<!DOCTYPE html>
<html>
<body>

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v7.min.js"></script>

<meta http-equiv="refresh" content="60" charset="utf-8"/>

<style>
  .inGreen { color: green; }
</style>

<h1 class="inGreen">My First D3 Graph</h1>

<p>My nonexistent cat is very grumpy... about this nonexistent graph</p>

<!-- Add 3 buttons -->
<button onclick="updateList('num1')">Dataset 1</button>
<button onclick="updateList('num2')">Dataset 2</button>
<button onclick="updateList('num3')">Dataset 3</button>

<!-- Create a div where the graph will take place -->
<div id="dataviz"></div>

<script>

var data;

// the rest of the HTML document needs to be loaded before running this,
// else place the data at the top of the file instead of the bottom
window.addEventListener("load", function(){

	// also works: document.querySelector("#csv");
	const csvScriptTag = document.getElementById("csv");

	// wrapper HTML instead of lots of quotes and \n JS syntax 
	// need X.trim() or merge header line with opening line of script tag
	const csv = csvScriptTag.innerText.trim();

	// d3.csv is a file fetch wrapper around this function anyway 
	data = d3.csvParse(csv);

});
// end anonymous function and call to addEventListener

function updateList(name) {
	const orderedList = document.createElement("ol");
	document.body.append(orderedList)

	for(const item of data) {
	  const listItem = document.createElement("li");
	  orderedList.append(listItem);

	  const unorderedList = document.createElement("ul");
	  listItem.append(unorderedList);
	  listItem.append(document.createElement("br"));

	  for(const key in item) {
	    if (key == name) {
		    const value = JSON.stringify(item[key]);

		    const propertyItem = document.createElement("li");
		    unorderedList.append(propertyItem);
		    propertyItem.innerHTML = `<b>${key}:</b> ${value}`;
		  }
	  }
	}

	// here's what you need
	console.dir(data);
}

</script>

<script id="csv" type="text/csv" src="./test.csv">
num1,num2,num3
61,30,49
38,19,38
24,30,50
21,25,31
39,55,43
56,19,65
51,42,55
26,36,26
53,34,61
35,60,45
41,28,19
53,59,54
65,51,26
54,18,54
27,40,54
44,58,56
37,18,23
43,32,56
49,23,36
45,51,60
18,34,20
26,51,23
23,28,32
21,48,42
62,60,62
54,53,51
59,21,26
54,33,62
65,54,40
18,57,43
35,41,44
32,62,61
23,37,23
59,62,32
61,65,27
30,63,65
43,57,23
54,44,41
22,38,41
61,46,38
56,50,20
39,19,49
49,47,57
18,54,20
61,31,28
30,57,63
37,33,43
30,57,59
47,50,48
43,19,63
30,44,40
27,34,41
22,53,48
46,28,49
34,64,45
61,33,39
61,24,54
52,26,24
60,23,21
56,34,50
45,29,25
44,48,19
28,60,27
63,19,52
65,36,30
49,29,65
22,61,48
55,61,57
27,65,59
41,54,62
51,49,28
33,34,57
19,45,27
21,45,42
48,37,44
65,49,31
54,43,32
59,58,26
36,46,39
28,30,51
46,49,36
22,47,39
20,24,59
62,26,40
30,51,49
52,52,20
23,60,65
24,45,37
33,22,57
24,52,25
32,19,28
63,60,42
22,33,30
25,31,47
65,51,58
44,30,47
37,47,18
45,52,30
65,51,52
57,47,54
</script>

</body>
</html>